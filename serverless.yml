service: bamboo-tracker

plugins:
  - serverless-offline
  - serverless-deployment-bucket

provider:
  name: aws
  runtime: go1.x
  stackTags:
    ENVIRONMENT: ${self:provider.stage}
    PROJECT: ${self:service}-${self:provider.stage}
  deploymentBucket:
    name: ${self:service}-deployment-bucket-${self:provider.region}-${self:provider.stage}
  stage: ${opt:stage}
  region: ${opt:region, 'eu-central-1'}
  logRetentionInDays: 7

package:
  exclude:
    - ./**
  include:
    - ./bin/**

functions:
  uploadTimesheet:
    handler: bin/timesheetUploader
    events:
      - schedule: cron(0 17 ? * MON-FRI *)
    environment:
      BAMBOO_HOST: TODO
      BAMBOO_USERNAME: TODO
      BAMBOO_PASSWORD: TODO
      TIMESHEETS: |
        tuesday:
          - start: 9:00
            end: 12:00
          - start: 12:30
            end: 16:35
        wednesday:
          - start: 9:00
            end: 12:00
          - start: 12:30
            end: 16:35
        thursday:
          - start: 9:00
            end: 12:00
          - start: 12:30
            end: 16:35

